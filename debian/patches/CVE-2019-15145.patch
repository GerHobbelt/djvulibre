--- a/libdjvu/GBitmap.h
+++ b/libdjvu/GBitmap.h
@@ -566,7 +566,7 @@
 {
   if (!bytes) 
     uncompress();
-  if (row<0 || row>=nrows) {
+  if (row<0 || row>=nrows || !bytes) {
 #ifndef NDEBUG
     if (zerosize < bytes_per_row + border)
       G_THROW( ERR_MSG("GBitmap.zero_small") );
@@ -581,7 +581,7 @@
 {
   if (!bytes) 
     ((GBitmap*)this)->uncompress();
-  if (row<0 || row>=nrows) {
+  if (row<0 || row>=nrows || !bytes) {
 #ifndef NDEBUG
     if (zerosize < bytes_per_row + border)
       G_THROW( ERR_MSG("GBitmap.zero_small") );
